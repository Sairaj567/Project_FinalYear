<%- include('../partials/header') %>

<div class="dashboard-container">
  <%- include('../partials/student-nav') %>
  
  <div class="main-content">
    <div class="content-header">
      <h1>Job Listings</h1>
    </div>

    <form action="/student/jobs" method="GET" class="filter-bar">
      <div class="form-group">
        <label for="company">Company</label>
        <input type="text" name="company" id="company" value="<%= filters.company || '' %>" placeholder="Company Name">
      </div>
      <div class="form-group">
        <label for="location">Location</label>
        <input type="text" name="location" id="location" value="<%= filters.location || '' %>" placeholder="Location">
      </div>
      <div class="form-group">
        <label for="role">Role Type</label>
        <select name="role" id="role">
          <option value="">All Types</option>
          <option value="Campus Drive" <%= filters.role === 'Campus Drive' ? 'selected' : '' %>>Campus Drive</option>
          <option value="Internship" <%= filters.role === 'Internship' ? 'selected' : '' %>>Internship</option>
          <option value="Full-time" <%= filters.role === 'Full-time' ? 'selected' : '' %>>Full-time</option>
          <option value="Part-time" <%= filters.role === 'Part-time' ? 'selected' : '' %>>Part-time</option>
        </select>
      </div>
      <button type="submit" class="btn btn-primary">Filter</button>
    </form>

    <div class="job-list">
      <% if (jobs.length === 0) { %>
        <p>No jobs found matching your criteria.</p>
      <% } %>

      <% jobs.forEach(job => { %>
        <div class="card job-card">
          <div class="job-card-details">
            <h3><a href="/student/jobs/<%= job._id %>"><%= job.title %></a></h3>
            <p class="company"><%= job.company %></p>
            <div class="job-tags">
              <span class="job-tag role-type"><%= job.roleType %></span>
              <span class="job-tag"><%= job.location %></span>
              <span class="job-tag"><%= job.ctc %></span>
            </div>
          </div>
          <div class="job-card-actions">
            <a href="/student/jobs/<%= job._id %>" class="btn btn-primary">View & Apply</a>
          </div>
        </div>
      <% }) %>
    </div>

  </div>
</div>

<%- include('../partials/footer') %>

<%- include('../partials/header') %>

<div class="dashboard-container">
  <%- include('../partials/student-nav') %>
  
  <div class="main-content">
    <div class="content-header">
      <h1>Job Listings</h1>
    </div>

    <form action="/student/jobs" method="GET" class="filter-bar">
      <div class="form-group">
        <label for="company">Company</label>
        <input type="text" name="company" id="company" value="<%= filters.company || '' %>" placeholder="Company Name">
      </div>
      <div class="form-group">
        <label for="location">Location</label>
        <input type="text" name="location" id="location" value="<%= filters.location || '' %>" placeholder="On-site, Remote...">
      </div>
      <div class="form-group">
        <label for="skill">Skill</label>
        <input type="text" name="skill" id="skill" value="<%= filters.skill || '' %>" placeholder="e.g., Java, Python">
      </div>
      <button type="submit" class="btn">Filter</button>
    </form>

    <div class="job-listings">
      <% if (jobs.length === 0) { %>
        <p>No jobs found matching your criteria.</p>
      <% } %>

      <% jobs.forEach(job => { %>
        <div class="card job-card">
          <div class="job-card-details">
            <h3><a href="/student/jobs/<%= job._id %>"><%= job.job_title %></a></h3>
            <p class="company"><%= job.company_name %></p>
            <div class="job-tags">
              <span class="job-tag role-type"><%= job.compensation %></span>
              <span class="job-tag"><%= job.location %></span>
              
              <% if (job.key_skills_mentioned && job.key_skills_mentioned.length > 0) { %>
                <span class="job-tag"><%= job.key_skills_mentioned.join(', ') %></span>
              <% } %>
            </div>
          </div>
          <div class="job-card-actions">
            <a href="/student/jobs/<%= job._id %>" class="btn btn-primary">View Details</a>
          </div>
        </div>
      <% }) %>
    </div>

  </div>
</div>

<%- include('../partials/footer') %>
